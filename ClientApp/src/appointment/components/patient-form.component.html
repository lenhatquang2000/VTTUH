<form [formGroup]="patientForm" (ngSubmit)="onSubmit()">
  <div class="row g-3">
    <!-- Họ và tên -->
    <div class="col-12 col-md-6">
      <label class="form-label">Họ và tên <span class="text-danger">*</span></label>
      <input type="text" class="form-control" formControlName="patientName" 
             [class.is-invalid]="patientForm.get('patientName')?.invalid && patientForm.get('patientName')?.touched">
      <div class="invalid-feedback" *ngIf="patientForm.get('patientName')?.invalid && patientForm.get('patientName')?.touched">
        {{ getFieldError('patientName') }}
      </div>
    </div>

    <!-- Năm sinh hoặc Ngày sinh -->
    <div class="col-12 col-md-6">
      <label class="form-label">Năm sinh <span class="text-danger">*</span></label>
      <input type="number" class="form-control" formControlName="birthYear" 
             placeholder="VD: 1990"
             [class.is-invalid]="patientForm.get('birthYear')?.invalid && patientForm.get('birthYear')?.touched">
      <div class="invalid-feedback" *ngIf="patientForm.get('birthYear')?.invalid && patientForm.get('birthYear')?.touched">
        {{ getFieldError('birthYear') }}
      </div>
    </div>

    <!-- Giới tính -->
    <div class="col-12 col-md-6">
      <label class="form-label">Giới tính <span class="text-danger">*</span></label>
      <select class="form-select" formControlName="gender"
              [class.is-invalid]="patientForm.get('gender')?.invalid && patientForm.get('gender')?.touched">
        <option value="">Chọn giới tính</option>
        <option value="male">Nam</option>
        <option value="female">Nữ</option>
        <option value="other">Khác</option>
      </select>
      <div class="invalid-feedback" *ngIf="patientForm.get('gender')?.invalid && patientForm.get('gender')?.touched">
        {{ getFieldError('gender') }}
      </div>
    </div>

    <!-- Số điện thoại -->
    <div class="col-12 col-md-6">
      <label class="form-label">Số điện thoại <span class="text-danger">*</span></label>
      <input type="tel" class="form-control" formControlName="phone" 
             placeholder="VD: 0912345678"
             [class.is-invalid]="patientForm.get('phone')?.invalid && patientForm.get('phone')?.touched">
      <div class="invalid-feedback" *ngIf="patientForm.get('phone')?.invalid && patientForm.get('phone')?.touched">
        {{ getFieldError('phone') }}
      </div>
    </div>

    <!-- Email -->
    <div class="col-12 col-md-6">
      <label class="form-label">Email</label>
      <input type="email" class="form-control" formControlName="email" 
             placeholder="VD: example@email.com"
             [class.is-invalid]="patientForm.get('email')?.invalid && patientForm.get('email')?.touched">
      <div class="invalid-feedback" *ngIf="patientForm.get('email')?.invalid && patientForm.get('email')?.touched">
        {{ getFieldError('email') }}
      </div>
    </div>

    <!-- CMND/CCCD -->
    <div class="col-12 col-md-6">
      <label class="form-label">CMND/CCCD</label>
      <input type="text" class="form-control" formControlName="idCard" 
             placeholder="Nhập số CMND/CCCD">
    </div>

    <!-- Địa chỉ -->
    <div class="col-12">
      <label class="form-label">Địa chỉ</label>
      <input type="text" class="form-control" formControlName="address" 
             placeholder="Nhập địa chỉ">
    </div>

    <!-- Lý do khám -->
    <div class="col-12">
      <label class="form-label">Lý do khám / Triệu chứng</label>
      <textarea class="form-control" formControlName="reason" rows="3" 
                placeholder="Mô tả ngắn gọn về lý do khám hoặc triệu chứng hiện tại..."></textarea>
    </div>

    <!-- BHYT -->
    <div class="col-12">
      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="hasInsurance" 
               [checked]="hasInsurance" (change)="onInsuranceChange($event)">
        <label class="form-check-label" for="hasInsurance">
          Có BHYT (Bảo hiểm y tế)
        </label>
      </div>
      <div *ngIf="hasInsurance" class="mt-2">
        <label class="form-label">Mã thẻ BHYT</label>
        <input type="text" class="form-control" formControlName="insuranceCard" 
               placeholder="Nhập mã thẻ BHYT">
      </div>
    </div>
  </div>
</form>

