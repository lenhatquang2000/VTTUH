<!-- Hero Section with Blue/Cyan/Green Gradient -->
<section class="position-relative overflow-hidden" style="background: linear-gradient(135deg, #0EA5E9 0%, #06B6D4 50%, #10B981 100%); min-height: 380px;">
  <!-- Decorative Elements -->
  <div class="position-absolute top-0 start-0 w-100 h-100" style="opacity: 0.08;">
    <div class="position-absolute" style="top: 8%; left: 5%; font-size: 10rem; color: white;">
      <i class="bi bi-receipt"></i>
    </div>
    <div class="position-absolute" style="top: 20%; right: 10%; font-size: 6rem; color: white;">
      <i class="bi bi-file-earmark-check"></i>
    </div>
    <div class="position-absolute" style="bottom: 25%; left: 20%; font-size: 5rem; color: white;">
      <i class="bi bi-search"></i>
    </div>
    <div class="position-absolute" style="bottom: 15%; right: 8%; font-size: 7rem; color: white;">
      <i class="bi bi-download"></i>
    </div>
  </div>
  
  <div class="container position-relative py-5">
    <div class="row align-items-center py-4">
      <div class="col-lg-8 mx-auto text-center text-white">
        <div class="mb-4">
          <span class="badge bg-white text-dark px-4 py-2 rounded-pill fs-6 shadow-sm">
            <i class="bi bi-shield-check me-2 text-success"></i>
            Xác thực - An toàn - Tiện lợi
          </span>
        </div>
        <h1 class="display-4 fw-bold mb-3" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.25);">
          <i class="bi bi-receipt me-3"></i>Tra cứu hóa đơn điện tử
        </h1>
        <p class="lead mb-0 opacity-90" style="font-size: 1.3rem;">
          Tra cứu và tải hóa đơn điện tử mọi lúc mọi nơi
        </p>
      </div>
    </div>
  </div>
  
  <!-- Wave Divider -->
  <div class="position-absolute bottom-0 start-0 w-100">
    <svg viewBox="0 0 1440 120" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" style="width: 100%; height: 60px;">
      <path d="M0 120L48 110C96 100 192 80 288 70C384 60 480 60 576 65C672 70 768 80 864 85C960 90 1056 90 1152 85C1248 80 1344 70 1392 65L1440 60V120H1392C1344 120 1248 120 1152 120C1056 120 960 120 864 120C768 120 672 120 576 120C480 120 384 120 288 120C192 120 96 120 48 120H0Z" fill="white"/>
    </svg>
  </div>
</section>

<!-- Stats Section -->
<section class="py-4 bg-white">
  <div class="container">
    <div class="row g-4">
      <div *ngFor="let stat of stats" class="col-6 col-md-3">
        <div class="text-center p-3 rounded-4 h-100 service-card-hover" style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); cursor: default;">
          <div class="d-inline-flex align-items-center justify-content-center rounded-circle mb-2 shadow-sm" 
               [style.background]="'linear-gradient(135deg, ' + stat.color + ', ' + stat.color + 'cc)'"
               style="width: 55px; height: 55px;">
            <i [class]="'bi ' + stat.icon + ' text-white'" style="font-size: 1.4rem;"></i>
          </div>
          <h4 class="fw-bold mb-1" [style.color]="stat.color">{{ stat.value }}</h4>
          <p class="text-muted small mb-0">{{ stat.label }}</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Search Section -->
<section class="py-5" style="background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-8">
        <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
          <div class="card-header border-0 p-4 text-white text-center" style="background: linear-gradient(135deg, #0EA5E9 0%, #06B6D4 100%);">
            <i class="bi bi-search display-5 mb-2"></i>
            <h4 class="fw-bold mb-0">Tra cứu hóa đơn</h4>
            <p class="mb-0 opacity-90 small">Nhập thông tin để tìm kiếm hóa đơn của bạn</p>
          </div>
          
          <div class="card-body p-4 p-md-5">
            <!-- Search Form -->
            <div class="row g-4">
              <div class="col-12">
                <label class="form-label fw-semibold">
                  <i class="bi bi-upc-scan me-2 text-primary"></i>Mã hóa đơn
                </label>
                <input type="text" 
                       class="form-control form-control-lg rounded-pill py-3 px-4"
                       placeholder="Nhập mã hóa đơn (VD: HD123456)"
                       [(ngModel)]="searchCode">
              </div>
              
              <div class="col-12">
                <div class="text-center text-muted">
                  <span class="px-3 bg-white position-relative" style="top: -10px;">hoặc</span>
                  <hr class="mt-0">
                </div>
              </div>
              
              <div class="col-12 col-md-6">
                <label class="form-label fw-semibold">
                  <i class="bi bi-telephone me-2 text-primary"></i>Số điện thoại
                </label>
                <input type="tel" 
                       class="form-control form-control-lg rounded-pill py-3 px-4"
                       placeholder="Nhập số điện thoại"
                       [(ngModel)]="searchPhone">
              </div>
              
              <div class="col-12 col-md-6">
                <label class="form-label fw-semibold">
                  <i class="bi bi-calendar3 me-2 text-primary"></i>Ngày khám (tùy chọn)
                </label>
                <input type="date" 
                       class="form-control form-control-lg rounded-pill py-3 px-4"
                       [(ngModel)]="searchDate">
              </div>
              
              <!-- Error Message -->
              <div *ngIf="searchError()" class="col-12">
                <div class="alert alert-danger rounded-4 d-flex align-items-center gap-2">
                  <i class="bi bi-exclamation-circle-fill"></i>
                  {{ searchError() }}
                </div>
              </div>
              
              <div class="col-12">
                <button class="btn btn-lg w-100 text-white rounded-pill py-3 shadow"
                        style="background: linear-gradient(135deg, #0EA5E9 0%, #10B981 100%);"
                        [disabled]="isSearching()"
                        (click)="searchInvoice()">
                  <span *ngIf="!isSearching()">
                    <i class="bi bi-search me-2"></i>Tra cứu hóa đơn
                  </span>
                  <span *ngIf="isSearching()">
                    <span class="spinner-border spinner-border-sm me-2"></span>Đang tìm kiếm...
                  </span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Search Result Section -->
<section *ngIf="hasSearched() && !isSearching()" class="py-5 bg-white">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-8">
        
        <!-- Result Found -->
        <div *ngIf="searchResult()" class="card border-0 shadow-lg rounded-4 overflow-hidden">
          <div class="card-header border-0 p-4 text-white text-center" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
            <i class="bi bi-check-circle-fill display-5 mb-2"></i>
            <h4 class="fw-bold mb-0">Tìm thấy hóa đơn</h4>
          </div>
          
          <div class="card-body p-4 p-md-5">
            <div class="row g-4">
              <div class="col-12 col-md-6">
                <div class="p-3 rounded-4" style="background: #f8fafc;">
                  <p class="text-muted small mb-1">Mã hóa đơn</p>
                  <h5 class="fw-bold text-primary mb-0">{{ searchResult()!.invoiceCode }}</h5>
                </div>
              </div>
              <div class="col-12 col-md-6">
                <div class="p-3 rounded-4" style="background: #f8fafc;">
                  <p class="text-muted small mb-1">Ngày phát hành</p>
                  <h5 class="fw-bold text-dark mb-0">{{ searchResult()!.invoiceDate }}</h5>
                </div>
              </div>
              <div class="col-12 col-md-6">
                <div class="p-3 rounded-4" style="background: #f8fafc;">
                  <p class="text-muted small mb-1">Tên bệnh nhân</p>
                  <h5 class="fw-bold text-dark mb-0">{{ searchResult()!.patientName }}</h5>
                </div>
              </div>
              <div class="col-12 col-md-6">
                <div class="p-3 rounded-4" style="background: #f8fafc;">
                  <p class="text-muted small mb-1">Tổng tiền</p>
                  <h5 class="fw-bold text-success mb-0">{{ searchResult()!.totalAmount | number:'1.0-0' }} VNĐ</h5>
                </div>
              </div>
              <div class="col-12">
                <div class="p-3 rounded-4 text-center" style="background: #f8fafc;">
                  <p class="text-muted small mb-1">Trạng thái</p>
                  <span class="badge rounded-pill px-4 py-2" [ngClass]="getStatusClass(searchResult()!.status)">
                    {{ getStatusLabel(searchResult()!.status) }}
                  </span>
                </div>
              </div>
            </div>
            
            <div class="d-flex flex-wrap gap-3 mt-4 justify-content-center">
              <a [href]="searchResult()!.downloadUrl" 
                 class="btn btn-lg rounded-pill px-5 text-white"
                 style="background: linear-gradient(135deg, #0EA5E9 0%, #06B6D4 100%);">
                <i class="bi bi-download me-2"></i>Tải hóa đơn PDF
              </a>
              <button class="btn btn-lg btn-outline-secondary rounded-pill px-4"
                      (click)="resetSearch()">
                <i class="bi bi-arrow-counterclockwise me-2"></i>Tra cứu khác
              </button>
            </div>
          </div>
        </div>
        
        <!-- No Result -->
        <div *ngIf="!searchResult() && searchError()" class="card border-0 shadow-lg rounded-4 overflow-hidden">
          <div class="card-body p-5 text-center">
            <div class="rounded-circle d-inline-flex align-items-center justify-content-center mb-4"
                 style="width: 100px; height: 100px; background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);">
              <i class="bi bi-file-earmark-x display-4 text-muted"></i>
            </div>
            <h4 class="fw-bold text-muted mb-3">Không tìm thấy hóa đơn</h4>
            <p class="text-muted mb-4">{{ searchError() }}</p>
            <button class="btn btn-lg rounded-pill px-5 text-white"
                    style="background: linear-gradient(135deg, #0EA5E9 0%, #10B981 100%);"
                    (click)="resetSearch()">
              <i class="bi bi-arrow-counterclockwise me-2"></i>Thử lại
            </button>
          </div>
        </div>
        
      </div>
    </div>
  </div>
</section>

<!-- FAQ Section -->
<section class="py-5" style="background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);">
  <div class="container">
    <div class="text-center mb-5">
      <span class="badge px-3 py-2 rounded-pill mb-3 text-white" style="background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);">
        <i class="bi bi-question-circle me-2"></i>Hỗ trợ
      </span>
      <h2 class="fw-bold" style="color: #6366F1;">Câu hỏi thường gặp</h2>
    </div>
    
    <div class="row justify-content-center">
      <div class="col-12 col-lg-8">
        <div class="accordion" id="faqAccordion">
          <div *ngFor="let faq of faqs; let i = index" class="accordion-item border-0 shadow-sm rounded-4 mb-3 overflow-hidden">
            <h2 class="accordion-header" [id]="'heading' + i">
              <button class="accordion-button fw-bold"
                      [ngClass]="{'collapsed': i !== 0}"
                      type="button"
                      data-bs-toggle="collapse"
                      [attr.data-bs-target]="'#collapse' + i"
                      [attr.aria-expanded]="i === 0 ? 'true' : 'false'"
                      [attr.aria-controls]="'collapse' + i">
                <i class="bi bi-question-circle me-2 text-primary"></i>
                {{ faq.question }}
              </button>
            </h2>
            <div [id]="'collapse' + i"
                 class="accordion-collapse collapse"
                 [ngClass]="{'show': i === 0}"
                 [attr.aria-labelledby]="'heading' + i"
                 data-bs-parent="#faqAccordion">
              <div class="accordion-body text-muted">
                {{ faq.answer }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA Section -->
<section class="py-5" style="background: linear-gradient(135deg, #0EA5E9 0%, #06B6D4 50%, #10B981 100%);">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8 text-white mb-4 mb-lg-0">
        <h3 class="fw-bold mb-2">
          <i class="bi bi-headset me-2"></i>Cần hỗ trợ thêm?
        </h3>
        <p class="mb-0 opacity-90">Liên hệ hotline <strong>0293 3953 888</strong> hoặc email <strong>hotro@vttuh.vn</strong></p>
      </div>
      <div class="col-lg-4 text-lg-end">
        <a href="tel:02933953888" class="btn btn-light btn-lg rounded-pill px-5 shadow-lg fw-bold">
          <i class="bi bi-telephone me-2"></i>Gọi hỗ trợ
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Info Section -->
<section class="py-5 bg-white">
  <div class="container">
    <div class="row g-4">
      <div class="col-12 col-md-4">
        <div class="card border-0 shadow-sm h-100 rounded-4 p-4 service-card-hover">
          <div class="d-flex align-items-start gap-3">
            <div class="d-inline-flex align-items-center justify-content-center rounded-circle flex-shrink-0"
                 style="width: 60px; height: 60px; background: linear-gradient(135deg, #0EA5E9, #06B6D4);">
              <i class="bi bi-shield-lock text-white" style="font-size: 1.5rem;"></i>
            </div>
            <div>
              <h5 class="fw-bold mb-2" style="color: #0EA5E9;">Bảo mật thông tin</h5>
              <p class="text-muted mb-0 small">Thông tin hóa đơn được mã hóa và bảo mật theo tiêu chuẩn cao nhất</p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-4">
        <div class="card border-0 shadow-sm h-100 rounded-4 p-4 service-card-hover">
          <div class="d-flex align-items-start gap-3">
            <div class="d-inline-flex align-items-center justify-content-center rounded-circle flex-shrink-0"
                 style="width: 60px; height: 60px; background: linear-gradient(135deg, #10B981, #059669);">
              <i class="bi bi-patch-check text-white" style="font-size: 1.5rem;"></i>
            </div>
            <div>
              <h5 class="fw-bold mb-2" style="color: #10B981;">Giá trị pháp lý</h5>
              <p class="text-muted mb-0 small">Hóa đơn điện tử có giá trị pháp lý tương đương hóa đơn giấy</p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-4">
        <div class="card border-0 shadow-sm h-100 rounded-4 p-4 service-card-hover">
          <div class="d-flex align-items-start gap-3">
            <div class="d-inline-flex align-items-center justify-content-center rounded-circle flex-shrink-0"
                 style="width: 60px; height: 60px; background: linear-gradient(135deg, #6366F1, #8B5CF6);">
              <i class="bi bi-cloud-arrow-down text-white" style="font-size: 1.5rem;"></i>
            </div>
            <div>
              <h5 class="fw-bold mb-2" style="color: #6366F1;">Lưu trữ vĩnh viễn</h5>
              <p class="text-muted mb-0 small">Hóa đơn được lưu trữ trên hệ thống, tra cứu bất cứ lúc nào</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

